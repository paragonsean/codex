
üß™ Running tests/test_complete_report_system.py
üß™ Testing Complete Report Generation System
============================================================

üì∞ Testing complete report generation for MU...
Processing market data for MU (180 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

üß™ Running tests/test_csv_import.py
üì• Testing CSV Import Functionality
========================================
üìÑ Reading from: /Users/seanbaker/codex/tests/fixtures/sample_portfolio.csv
‚úÖ CSV columns validated: ticker, num_shares, cost_per_share, purchase_date, notes
  ‚úÖ Row 1: AAPL - 100.0 shares @ $150.25
  ‚úÖ Row 2: MSFT - 50.0 shares @ $250.5
  ‚úÖ Row 3: GOOGL - 25.0 shares @ $2800.0
  ‚úÖ Row 4: NVDA - 75.0 shares @ $450.75
  ‚úÖ Row 5: TSLA - 30.0 shares @ $200.0
  ‚úÖ Row 6: BRK.B - 10.0 shares @ $350.0

üìä Import Summary:
  ‚Ä¢ Total positions imported: 6
  ‚Ä¢ Portfolio saved to: /Users/seanbaker/codex/tests/test_imported_portfolio.json
  ‚Ä¢ Total portfolio value: $140,856.25

üìã Imported Positions:
  ‚Ä¢ AAPL: 100.0 shares @ $150.25 = $15,025.00
    üìÖ Purchased: 2023-01-15
    üìù Notes: Core position
  ‚Ä¢ MSFT: 50.0 shares @ $250.50 = $12,525.00
    üìÖ Purchased: 2023-02-20
    üìù Notes: Cloud exposure
  ‚Ä¢ GOOGL: 25.0 shares @ $2800.00 = $70,000.00
    üìÖ Purchased: 2023-03-10
    üìù Notes: Search dominance
  ‚Ä¢ NVDA: 75.0 shares @ $450.75 = $33,806.25
    üìÖ Purchased: 2023-04-05
    üìù Notes: AI play
  ‚Ä¢ TSLA: 30.0 shares @ $200.00 = $6,000.00
    üìÖ Purchased: 2023-05-12
    üìù Notes: Growth stock
  ‚Ä¢ BRK.B: 10.0 shares @ $350.00 = $3,500.00
    üìÖ Purchased: 2023-06-08
    üìù Notes: Value holding

‚úÖ CSV import test completed successfully!

üì§ Testing CSV Export Functionality
========================================
‚úÖ Portfolio exported to: /Users/seanbaker/codex/tests/test_portfolio_export.csv
üìä Exported 2 positions

üìÑ Exported CSV content:
ticker,num_shares,cost_per_share,purchase_date,notes
AAPL,100,150.25,2023-01-15,Core position
MSFT,50,250.5,2023-02-20,Cloud exposure


‚úÖ CSV export test completed successfully!

üß™ Running tests/test_dual_scoring.py
üß™ Testing Dual Scoring System
============================================================

================================================================================
üéØ Analyzing MU
================================================================================

================================================================================
üéØ DUAL SCORING ANALYSIS - MU
================================================================================

üìä OVERALL ASSESSMENT:
  Opportunity Score: 100.0/100
  Sell-Risk Score:  100.0/100
  Overall Bias:      HOLD
  Confidence:        28.7%

üü¢ OPPORTUNITY CLUSTERS:
  Technical Momentum: 80.0% strength ‚úÖ ACTIVE
    ‚Ä¢ Strong 21D momentum
    ‚Ä¢ Bullish trend (50>200)
    ‚Ä¢ Volume confirms upside
  Value/Reversal: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Breakout Potential: 60.0% strength ‚úÖ ACTIVE
    ‚Ä¢ Near 20D high
    ‚Ä¢ Volume surge

üî¥ SELL-RISK CLUSTERS:
  Technical Overheating: 90.0% strength ‚ö†Ô∏è  ACTIVE
    ‚Ä¢ RSI overbought (>70)
    ‚Ä¢ Potential RSI divergence
    ‚Ä¢ Extended gains (>50% in 3mo)
  Trend Deterioration: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Distribution Behavior: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Volatility Regime Shift: 30.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered

üéØ KEY DRIVING FACTORS:
  1. üî¥ RSI overbought (>70)
  2. üî¥ Potential RSI divergence
  3. üü¢ Strong 21D momentum

üìã TRADING IMPLICATIONS:
  ‚Ä¢ Maintain current positions
  ‚Ä¢ Slight bearish bias - watch for exit signals

üìä Cluster Analysis:
Opportunity Clusters Triggered: 2/3
Sell-Risk Clusters Triggered: 1/4

üéØ Trading Recommendation:
‚öñÔ∏è  HOLD - Balanced opportunity (100.0) and risk (100.0) scores

================================================================================
üéØ Analyzing WDC
================================================================================

================================================================================
üéØ DUAL SCORING ANALYSIS - WDC
================================================================================

üìä OVERALL ASSESSMENT:
  Opportunity Score: 100.0/100
  Sell-Risk Score:  100.0/100
  Overall Bias:      HOLD
  Confidence:        18.8%

üü¢ OPPORTUNITY CLUSTERS:
  Technical Momentum: 60.0% strength ‚úÖ ACTIVE
    ‚Ä¢ Strong 21D momentum
    ‚Ä¢ Bullish trend (50>200)
  Value/Reversal: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Breakout Potential: 30.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered

üî¥ SELL-RISK CLUSTERS:
  Technical Overheating: 90.0% strength ‚ö†Ô∏è  ACTIVE
    ‚Ä¢ RSI overbought (>70)
    ‚Ä¢ Potential RSI divergence
    ‚Ä¢ Extended gains (>50% in 3mo)
  Trend Deterioration: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Distribution Behavior: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Volatility Regime Shift: 30.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered

üéØ KEY DRIVING FACTORS:
  1. üî¥ RSI overbought (>70)
  2. üî¥ Potential RSI divergence
  3. üü¢ Strong 21D momentum

üìã TRADING IMPLICATIONS:
  ‚Ä¢ Maintain current positions
  ‚Ä¢ Slight bearish bias - watch for exit signals

üìä Cluster Analysis:
Opportunity Clusters Triggered: 1/3
Sell-Risk Clusters Triggered: 1/4

üéØ Trading Recommendation:
‚öñÔ∏è  HOLD - Balanced opportunity (100.0) and risk (100.0) scores

================================================================================
üéØ Analyzing AAPL
================================================================================

================================================================================
üéØ DUAL SCORING ANALYSIS - AAPL
================================================================================

üìä OVERALL ASSESSMENT:
  Opportunity Score: 100.0/100
  Sell-Risk Score:  100.0/100
  Overall Bias:      HOLD
  Confidence:        17.5%

üü¢ OPPORTUNITY CLUSTERS:
  Technical Momentum: 40.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Value/Reversal: 40.0% strength ‚úÖ ACTIVE
    ‚Ä¢ Low volatility regime
    ‚Ä¢ Near 20D support
  Breakout Potential: 30.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered

üî¥ SELL-RISK CLUSTERS:
  Technical Overheating: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Trend Deterioration: 100.0% strength ‚ö†Ô∏è  ACTIVE
    ‚Ä¢ Trading below 50DMA
    ‚Ä¢ 50DMA resistance
    ‚Ä¢ Bearish trend (50<200)
  Distribution Behavior: 20.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered
  Volatility Regime Shift: 0.0% strength ‚ùå INACTIVE
    ‚Ä¢ No signals triggered

üéØ KEY DRIVING FACTORS:
  1. üî¥ Trading below 50DMA
  2. üî¥ 50DMA resistance
  3. üü¢ Low volatility regime

üìã TRADING IMPLICATIONS:
  ‚Ä¢ Maintain current positions
  ‚Ä¢ Slight bearish bias - watch for exit signals

üìä Cluster Analysis:
Opportunity Clusters Triggered: 1/3
Sell-Risk Clusters Triggered: 1/4

üéØ Trading Recommendation:
‚öñÔ∏è  HOLD - Balanced opportunity (100.0) and risk (100.0) scores

================================================================================
üîç SIGNAL CLUSTERING DEMONSTRATION
================================================================================

üìã Why Signal Clustering Matters:
‚Ä¢ Single indicators can be noisy and unreliable
‚Ä¢ Clusters of related signals provide stronger confirmation
‚Ä¢ Different market conditions require different signal emphasis
‚Ä¢ Reduces false signals and improves decision quality

üéØ Example: MU Overheating Analysis
Individual Signals:
  ‚Ä¢ RSI = 77.5 (overbought) ‚Üí Moderate sell signal
  ‚Ä¢ 21D return = +56.6% (strong gains) ‚Üí Moderate sell signal
  ‚Ä¢ Volatility = 67% (high) ‚Üí Weak sell signal
  ‚Ä¢ Volume Z-score = 2.1 (high) ‚Üí Ambiguous signal

Cluster Analysis:
  üìä Technical Overheating Cluster:
    ‚Ä¢ RSI overbought (>70) ‚úÖ
    ‚Ä¢ Extended gains (>30% in 3mo) ‚úÖ
    ‚Ä¢ High volatility with gains ‚úÖ
    ‚Üí Cluster STRENGTH: 0.7 (Strong)
    ‚Üí Cluster WEIGHT: 0.35 (High importance)

  üìä Distribution Behavior Cluster:
    ‚Ä¢ High volume win rate = 60% ‚ùå (Good)
    ‚Ä¢ Failed breakout frequency = 15% ‚ùå (Low)
    ‚Üí Cluster STRENGTH: 0.0 (Not triggered)

üéØ Final Assessment:
‚Ä¢ Multiple overheating signals create strong sell-risk cluster
‚Ä¢ Lack of distribution signals reduces overall risk
‚Ä¢ Result: Moderate sell-risk score with specific overheating concerns

üß™ Running tests/test_fixed_reports.py
üß™ Testing Fixed Report Generation
==================================================

üì∞ Testing report generation for MU...

üîÑ Running analyze_ticker...
Processing market data for MU (180 days)...
‚ùå Error in analysis: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

‚úÖ Fixed report test completed!

üß™ Running tests/test_fixed_system.py
üß™ Testing Fixed Advanced Trading System
============================================================

üì∞ Testing MU with fixed system...

üîÑ Running analyze_ticker...
Processing market data for MU (180 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

‚úÖ Fixed system test completed!

üß™ Running tests/test_gated_reports.py
üß™ Testing Gated Report Generation
==================================================

üìä Testing MU with 30 days lookback...
Processing market data for MU (30 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

üìä Testing MU with 180 days lookback...
Processing market data for MU (180 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

‚úÖ Gated report test completed!

üß™ Running tests/test_gated_system.py
üß™ Testing Gated Analysis System
==================================================

üìä Testing MU with 30 days lookback...
Processing market data for MU (30 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

üìä Testing MU with 180 days lookback...
Processing market data for MU (180 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

üìä Testing MU with 365 days lookback...
Processing market data for MU (365 days)...
‚ùå Error: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

‚úÖ Gated system test completed!

üß™ Running tests/test_market_data.py
Testing market data processor with working approach...
Fetching data for MU using news.py approach...
‚úÖ Data fetched successfully: 131 rows
Columns: ['Adj Close', 'Close', 'High', 'Low', 'Open', 'Volume']
Date range: 2025-07-16 00:00:00 to 2026-01-21 00:00:00
‚úÖ Price summary created:
  Last price: $389.11
  RSI: 77.2
  21D return: +56.55%

Testing MarketDataProcessor...

================================================================================
üìä MARKET DATA SUMMARY - MU
================================================================================

üìã Data Overview:
  Period: 2025-07-16 to 2026-01-21
  Data Points: 131
  Data Quality: good
  Missing Days: 0

üí∞ Current Price: $389.11

üìà Technical Indicators:
  RSI(14): 77.5
  50/200 DMA Trend: unknown
  Price vs 50DMA: +0.0%
  Price vs 200DMA: +0.0%
  20D High: $0.00
  20D Low: $0.00
  Position in 20D Range: 0.0%
  ATR(14): $0.00 (0.0%)
  Volume Z-Score: 2.11

üìä Returns:
  5D: +0.0%
  10D: +0.0%
  21D: +0.0%
  63D: +0.0%

‚ö†Ô∏è Risk Metrics:
  Max Drawdown: -20.5%
  Current Drawdown: 0.0%
  Volatility (20D): 67.0%
  Volatility Regime: unknown
  Downside Deviation: 0.000
  VaR (95%): 0.00%
  Sharpe Ratio (20D): 0.00
  Beta Estimate: 0.00

üì∞ News Effectiveness ('Good News Not Working'):
  Composite Score: 0.00
  Up-Day Volatility Ratio: 0.71
  High Volume Win Rate: 0.0%
  Intraday Weakness: 0.000
  Gap Down Frequency: 0.0%
  Failed Breakout Freq: 0.0%
  Volume-Price Divergence: 0.00
  Resistance Strength: 0.00

‚úÖ MarketDataProcessor test completed successfully!

üß™ Running tests/test_mock_data.py
üß™ Testing Improved Mock Data
========================================

AAPL:
  Current Price: $247.65
  RSI: 20.5
  21D Return: -9.0%
  Trend: bearish
  Volatility: low

MSFT:
  Current Price: $380.50
  RSI: 65.2
  21D Return: +8.0%
  Trend: bullish
  Volatility: normal

GOOGL:
  Current Price: $142.80
  RSI: 45.3
  21D Return: -12.0%
  Trend: bearish
  Volatility: elevated

NVDA:
  Current Price: $485.60
  RSI: 78.9
  21D Return: +35.0%
  Trend: bullish
  Volatility: high

TSLA:
  Current Price: $195.30
  RSI: 55.8
  21D Return: -18.0%
  Trend: bearish
  Volatility: high

BRK.B:
  Current Price: $425.80
  RSI: 42.1
  21D Return: +2.0%
  Trend: bullish
  Volatility: low

üß™ Running tests/test_news_analysis.py
üß™ Testing News Analysis System
==================================================

üì∞ Testing news analysis for MU...
üì° Fetching headlines...
‚úÖ Found 10 headlines
üìà Fetching price data...
‚úÖ Price data: $389.11
üìä Computing combined signal...
‚úÖ Combined signal: +48.89

üìã Headlines Analysis:
  1. KeyBanc Sees Micron (MU) in a ‚ÄòDifferent‚Äô Memory Cycle, Rais...
     Sentiment: +0.0
     Quality: 0.9
  2. Why Is Micron (MU) Stock Soaring Today - Yahoo Finance...
     Sentiment: +1.0
     Quality: 0.9
  3. Is It Too Late To Consider Micron Technology (MU) After 244%...
     Sentiment: +1.0
     Quality: 0.9
  4. Why Citi Remains Bullish on Micron Technology, Inc. (MU) - Y...
     Sentiment: +1.0
     Quality: 0.9
  5. RBC Initiates Micron (MU) at Outperform, Sees $50+ Peak EPS ...
     Sentiment: +0.0
     Quality: 0.9

üìà Price Summary:
  Current: $389.11
  5D Return: +15.1%
  21D Return: +56.6%
  63D Return: +88.2%

‚úÖ News analysis test completed!

üß™ Running tests/test_news_main.py
üß™ Testing News Main Function
==================================================

üì∞ Testing news main function for MU...
‚úÖ News analysis completed successfully!

üìã Output:
================================================================================
MU | combined_signal=45.22 | news_sent=2 | news_kw=1
Price: last=389.11 | 5d=+15.08% 21d=+56.55% 63d=+88.18% | vol(21d ann)=65.9% | mdd=-20.5% | unknown | RSI14=77.2 | vol_z20=2.17
News Analysis: 5 headlines | avg_quality=0.75 | high_impact=0
Categories: financial(1), market(1), products(1)
Notes:
  - RSI suggests overbought (>=70).
  - Volume spike (z>=2).

Top headlines:
  - (+1, kw=0, LowImpact Q:0.90) [Yahoo Finance] (2026-01-19T11:09:58+00:00) [none] Is It Too Late To Consider Micron Technology (MU) After 244% One-Year Surge? - Yahoo Finance
    https://news.google.com/rss/articles/CBMihgFBVV95cUxNRm9PVnlLMUpKcjMtYzdfUWt2cDdDQV9qUTFEaDhPQ1I0bFl3aThuTEp1blhkRVg4YTdCbWVwMW5TbHhYTVBkdUpOemx5SkR4Qng3c3IxVHctQ2VaSmdKdHZOQkJnQ3c3R3dsY25MWW5wYXBlUUtYeEFydjdCenFMOUVfckF3dw?oc=5
    Entities: companies:Consider,(MU)
  - (+0, kw=0, LowImpact Q:0.90) [CNBC] (2026-01-20T17:36:19+00:00) [financial,market] Stocks making the biggest moves premarket: Nvidia, J.B. Hunt, 3M, Micron & more - CNBC
    https://news.google.com/rss/articles/CBMimwFBVV95cUxNcFR4Q0xHTDBudmQxUUMyZWtUZnF1RkxJLUpwRmtvTDVuTkg1UnhTejJWVXRkX3ZRNFpyb25qblV3U2hlLU1CSnFGb051VDBzbTQtSjhVcDFSQ2JGOS1uWmRxeENBV2kwbzlkYlpyOXlUc3VPUGw1UFFSRW5uY2hQWFNYMG4zeEo1ZmhjWnJhS3hnczhZUFg5ZFVxZw?oc=5
    Entities: companies:J.B.,3M,,CNBC
  - (+0, kw=0, LowImpact Q:0.75) [Seeking Alpha] (2026-01-19T18:57:18+00:00) [none] Micron: Like 2023 Nvidia (But Better) (NASDAQ:MU) - Seeking Alpha
    https://news.google.com/rss/articles/CBMigAFBVV95cUxQc3cwVXpZZEx2ZWJ2UzdRMmNUMFNZUTg5ZzdSNEF1bHNfekFuS1kzRGc4N2xoOHNSU1Rka3NWdG10cGwxS21lcjNCQmxYNGlQMTVuYjZMOHNWRzVsZ3VEWjYycEczZXNOT2VjTGNUVlFLUjlKTW0wLVNoZ1pKc0Vadw?oc=5
    Entities: companies:(NASDAQ:MU)
  - (+0, kw=1, LowImpact Q:0.60) [Netflix] (2026-01-16T13:05:14+00:00) [products] The Can This Love Be Translated? Cast Explain the Heart-Wrenching Ending - Netflix
    https://news.google.com/rss/articles/CBMiiwFBVV95cUxNNzFleE1fSWFDakgxVGxBVkFzdDRtTHA2Qm1uYkFTV0NHdmpLakZORkJONktaamFnZ29jamNqQUphWERadE1rdHNRN0o5OGcwcU1fN3dEcHNJZUZLMWdKWUNxbTEzaGloRVh2aEdOWjhiRlZlOTJqcWoyb2UwTEs4em9xNzFfTDh3aHB3?oc=5
  - (+1, kw=0, LowImpact Q:0.60) [FloTrack] (2026-01-17T06:07:40+00:00) [none] Sophie Rambo Breaks Athing Mu's 500m High School National Record - FloTrack
    https://news.google.com/rss/articles/CBMiqgFBVV95cUxPSndJTW5jM2dvZkxQNzhWM01EbHhQWF92T0dqdXdtTUFPRnR4NGIxX3JDdXRyTDN5RFdnSVdTcEVWVG12R05SeDhGbVlWWG5KVjNFZTZJZV82aEYwWXdBRG54bDkwaEs1UzJTekJqZkVqbDJHV2FYa3VUbGJDSTNwZV9FMkhuLThTWnBkVnY3b282bWo1eTN6QUxlVlJMakU0dnFjaENxMm8yQQ?oc=5
    Entities: companies:Record


üß™ Running tests/test_portfolio_analysis.py
$BRK.B: possibly delisted; no timezone found

1 Failed download:
['BRK.B']: possibly delisted; no timezone found
üìä Testing Portfolio Analysis with Improved Mock Data
============================================================

üìö Analyzing portfolio from /Users/seanbaker/codex/tests/test_portfolio.json...
Processing market data for AAPL (180 days)...
Processing market data for MSFT (180 days)...
Processing market data for GOOGL (180 days)...
Processing market data for NVDA (180 days)...
Processing market data for TSLA (180 days)...
Processing market data for BRK.B (180 days)...
Portfolio: Test Portfolio
Total Positions: 0
Total Value: $0.00
Total P&L: $+0.00

Top 3 Positions:

Recommendations:
  High Risk: 0 positions

Position Details:

üß™ Running tests/test_report_functions.py
üß™ Testing Report Generation Functions
==================================================

üì∞ Testing report functions for MU...

üìÑ Testing Single Stock Report Generation...
Processing market data for MU (180 days)...
‚ùå Error in analysis: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

üß™ Running tests/test_report_generation.py
üß™ Testing Fixed Report Generation
==================================================

üìÑ Testing Single Stock Report...

üìÑ Generate Single Stock Report
-----------------------------------

üîÑ Generating report for MU...
Processing market data for MU (180 days)...
‚ùå Error analyzing MU: Analysis failed for MU: 'AdvancedNewsInterpreter' object has no attribute '_calculate_forward_returns'

‚ö†Ô∏è  Report generation may have issues
\n‚úÖ All tests passed.
